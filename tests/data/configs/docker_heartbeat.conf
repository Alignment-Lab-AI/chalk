unsubscribe("report", "json_console_out")
custom_report.terminal_chalk_time.enabled: false
custom_report.terminal_env_time.enabled: false
custom_report.terminal_other_op.enabled: false

exec.heartbeat: true
exec.heartbeat_rate: <<1 seconds>>

docker.wrap_entrypoint: true
docker.custom_labels: {"HELLO": "CRASH_OVERRIDE_TEST_LABEL"}
docker.arch_binary_locations: {"linux/amd64": "/tmp/chalk"}

profile test_host_report {
    key._CHALKS.report = true # Needed to include the per-artifact reports.
    key._OPERATION.report  = true
    key._OP_ARGV.report = true
}

profile test_artifact_report {
    key.CHALK_ID.report = true
    key.ARTIFACT_TYPE.report = true
    key._OP_ARTIFACT_PATH.report = true
    key.HASH.report = true
    key._CURRENT_HASH.report = true
    key._IMAGE_ID.report = true
    key.DOCKERFILE_PATH.report = true
    key._PROCESS_PID.report = true
}

sink_config test_std_out {
    sink: "stdout"
    enabled: true
}

custom_report exec_heartbeat_test {
  host_report: "test_host_report"
  artifact_report: "test_artifact_report"
  sink_configs: ["test_std_out"]
  use_when: ["exec", "heartbeat", "build"]
}
